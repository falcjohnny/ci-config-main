script-dir: /etc/nodepool/scripts
elements-dir: /etc/nodepool/elements
images-dir: /opt/nodepool_dib

cron:
  cleanup: '*/1 * * * *'
  check: '*/15 * * * *'
  image-update: '6 7 * * *'

zmq-publishers:
  - tcp://localhost:8888

gearman-servers:
  - host: 127.0.0.1

labels:
  - name: dsvm-slave
    image: dpc
    ready-script: set_iscsi_name.sh
    min-ready: 1
    providers:
      - name: H12-82   #Openstack server name

diskimages:
    - name: dpc
      elements:
        - ubuntu
        - vm
        - openstack-repos
        - puppet
        - nodepool-base
        - node-devstack
      release: trusty
      env-vars:
        TMPDIR: /opt/dib_tmp
        DIB_IMAGE_CACHE: /opt/dib_cache

providers:
  - name: H12-82
    username: 'admin'
    password: 'openstack'
    auth-url: 'http://172.22.12.82:5000/v2.0'
    project-name: 'admin'
    max-servers: 1
    boot-timeout: 1200
    launch-timeout: 3600
    keypair: 'jenkins'
    pool: 'external_network'
    networks:
      #TODO: Enter the ID of the "internal" network on the provider
      - net-id: 'e6be9ecb-126d-4324-808d-2319247b8140'
    images:
      - name: dpc
        min-ram: 4096 #8192
        diskimage: dpc
        username: jenkins
        private-key: '/home/nodepool/.ssh/id_rsa'

targets:
  - name: jenkins1
